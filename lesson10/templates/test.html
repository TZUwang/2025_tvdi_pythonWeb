<!DOCTYPE html>
<html>

<head>
    <title>Chart.js 散點圖(Scatter) 範例</title>
    <style type="text/css">
        /*給圖表一個固定的繪圖區域*/
        .chart-container {
            position: relative;
            width: 80vw;
            height: 60vh;
            margin: 20px auto;
            /*置中*/
            border: 1px solid #ccc;
            border-radius: 5px;
        }
    </style>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            console.log("Chart.js 已經載入，現在可以使用 'Chart' 這個物件了。");

            // JS抓取畫布與2D工具
            const ctx = document.getElementById('myChartCanvas').getContext('2d');

            // 散點圖的資料
            const studentData = [
                { x: 158, y: 55 },
                { x: 162, y: 58 },
                { x: 165, y: 62 },
                { x: 170, y: 65 },
                { x: 173, y: 70 },
                { x: 175, y: 68 },
                { x: 180, y: 75 },
                { x: 182, y: 78 },
                { x: 185, y: 82 },
                { x: 190, y: 85 },

            ];

            // 建立散點圖表
            const myScatterChart = new Chart(ctx, {
                // 指定散點圖類型
                type: 'scatter',

                // Data物件 存放資料
                data: {
                    datasets: [
                        {
                            label: '學生身高 vs 體重 (第一組)',
                            data: studentData,
                            backgroundColor: 'rgba(255, 99, 132, 0.2)', //點的顏色
                            borderColor: 'rgba(255, 99, 132, 1)', //點的邊框顏色
                            pointRadius: 8, //點的大小
                            pointHoverRadius: 10 //滑鼠滑過時點的大小
                        },
                        {
                            label: '學生身高 vs 體重 (第二組)',
                            data: [
                                { x: 160, y: 70 },
                                { x: 170, y: 80 },
                            ],
                            backgroundColor: 'rgba(54, 162, 235, 0.2)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            pointRadius: 8,
                            pointHoverRadius: 10
                        }
                    ]

                },
                // Options物件 設定圖表外觀樣式
                options: {
                    responsive: true,
                    maintainAspectRatio: false,

                    //座標軸設定
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'bottom',
                            title: {
                                display: true,
                                text: '身高(cm)',
                                font: {
                                    size: 16,
                                }
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: '體重(kg)',
                                font: {
                                    size: 16,
                                }
                            }
                        }
                    },
                    //插件 (plugins) 設定 例:標題和提示
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: '身高 & 體重的關係',
                            font: { size: 20 },
                            padding: 20
                        },
                        // tooltip: {
                        //     callbacks: {
                        //         label: function (context) {
                        //             //console.log(context);
                        //             let label = context.dataset.label || '';
                        //             let xVal = context.parsed.x;
                        //             let yVal = context.parsed.y;
                        //             return `${label}: ${xVal} cm, ${yVal} kg`
                        //         }
                        //     }
                        // }
                        tooltip: {
                            callbacks: {
                                label: function (context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    // 同時顯示身高和體重
                                    label += `(身高: ${context.parsed.x}cm, 體重: ${context.parsed.y}kg)`;
                                    return label;
                                }
                            }
                        }
                    }
                }

            });

        });
    </script>
</head>

<body>

    <h1>範例:學生身高 vs 體重 散點圖</h1>

    <div class="chart-container">
        <canvas id="myChartCanvas"></canvas>
    </div>

    <script src="{{ url_for('static',filename='vendor/chart.js/chart.umd.js') }}"></script>



</body>

</html>

<!-- {#script 寫在body最後 程式由上而下執行 所以先前指令EX:按鈕 h1都已經被製造執行 js才能實行 #}
{#document是window全域物件 #}
{#若script放在head區 則要加入監聽事件 監聽所有DOM都載入完成後才執行 才不會出錯#}
    <script> 
        document.addEventListener('DOMContentLoaded', function () {
            const titleElement = document.querySelector('#title');
            const buttonElement = document.querySelector('#myButton');

            buttonElement.addEventListener('click', function () {
                titleElement.textContent = '標題被更改了';
            })
        })
    </script> -->